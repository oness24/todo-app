/*! For license information please see main.ca0ffba0ad760c58b256.js.LICENSE.txt */
(()=>{"use strict";let e=-1;const t=t=>{addEventListener("pageshow",(n=>{n.persisted&&(e=n.timeStamp,t(n))}),!0)},n=(e,t,n,r)=>{let o,a;return i=>{t.value>=0&&(i||r)&&(a=t.value-(o??0),(a||void 0===o)&&(o=t.value,t.delta=a,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},r=e=>{requestAnimationFrame((()=>requestAnimationFrame((()=>e()))))},o=()=>{const e=performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},a=()=>{const e=o();return e?.activationStart??0},i=(t,n=-1)=>{const r=o();let i="navigate";return e>=0?i="back-forward-cache":r&&(document.prerendering||a()>0?i="prerender":document.wasDiscarded?i="restore":r.type&&(i=r.type.replace(/_/g,"-"))),{name:t,value:n,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:i}},c=new WeakMap;function s(e,t){return c.get(e)||c.set(e,new t),c.get(e)}class l{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const t=this.o[0],n=this.o.at(-1);this.i&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const u=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return r.observe({type:e,buffered:!0,...n}),r}}catch{}},d=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let f=-1;const p=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,m=e=>{"hidden"===document.visibilityState&&f>-1&&(f="visibilitychange"===e.type?e.timeStamp:0,v())},h=()=>{addEventListener("visibilitychange",m,!0),addEventListener("prerenderingchange",m,!0)},v=()=>{removeEventListener("visibilitychange",m,!0),removeEventListener("prerenderingchange",m,!0)},g=()=>{if(f<0){const e=a(),n=document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((t=>"hidden"===t.name&&t.startTime>e))[0]?.startTime;f=n??p(),h(),t((()=>{setTimeout((()=>{f=p(),h()}))}))}return{get firstHiddenTime(){return f}}},y=e=>{document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()},b=[1800,3e3],E=(e,o={})=>{y((()=>{const c=g();let s,l=i("FCP");const d=u("paint",(e=>{for(const t of e)"first-contentful-paint"===t.name&&(d.disconnect(),t.startTime<c.firstHiddenTime&&(l.value=Math.max(t.startTime-a(),0),l.entries.push(t),s(!0)))}));d&&(s=n(e,l,b,o.reportAllChanges),t((t=>{l=i("FCP"),s=n(e,l,b,o.reportAllChanges),r((()=>{l.value=performance.now()-t.timeStamp,s(!0)}))})))}))},T=[.1,.25];let k=0,w=1/0,S=0;const I=e=>{for(const t of e)t.interactionId&&(w=Math.min(w,t.interactionId),S=Math.max(S,t.interactionId),k=S?(S-w)/7+1:0)};let C;const L=()=>C?k:performance.interactionCount??0;let P=0;class O{u=[];l=new Map;m;p;v(){P=L(),this.u.length=0,this.l.clear()}P(){const e=Math.min(this.u.length-1,Math.floor((L()-P)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&"first-input"!==e.entryType)return;const t=this.u.at(-1);let n=this.l.get(e.interactionId);if(n||this.u.length<10||e.duration>t.T){if(n?e.duration>n.T?(n.entries=[e],n.T=e.duration):e.duration===n.T&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],T:e.duration},this.l.set(n.id,n),this.u.push(n)),this.u.sort(((e,t)=>t.T-e.T)),this.u.length>10){const e=this.u.splice(10);for(const t of e)this.l.delete(t.id)}this.p?.(n)}}}const j=e=>{const t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(t(e=d(e)),document.addEventListener("visibilitychange",e,{once:!0}))},B=[200,500];class A{m;h(e){this.m?.(e)}}const x=[2500,4e3],F=[800,1800],D=e=>{document.prerendering?y((()=>D(e))):"complete"!==document.readyState?addEventListener("load",(()=>D(e)),!0):setTimeout(e)};function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function M(){var e,t,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var s=r&&r.prototype instanceof c?r:c,l=Object.create(s.prototype);return _(l,"_invoke",function(n,r,o){var a,c,s,l=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,n){return a=t,c=0,s=e,f.n=n,i}};function p(n,r){for(c=n,s=r,t=0;!d&&l&&!o&&t<u.length;t++){var o,a=u[t],p=f.p,m=a[2];n>3?(o=m===r)&&(c=a[4]||3,s=a[5]===e?a[3]:a[5],a[4]=3,a[5]=e):a[0]<=p&&((o=n<2&&p<a[1])?(c=0,f.v=r,f.n=a[1]):p<m&&(o=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,f.n=m,c=0))}if(o||n>1)return i;throw d=!0,r}return function(o,u,m){if(l>1)throw TypeError("Generator is already running");for(d&&1===u&&p(u,m),c=u,s=m;(t=c<2?e:s)||!d;){a||(c?c<3?(c>1&&(f.n=-1),p(c,s)):f.n=s:f.v=s);try{if(l=2,a){if(c||(o="next"),t=a[o]){if(!(t=t.call(a,s)))throw TypeError("iterator result is not an object");if(!t.done)return t;s=t.value,c<2&&(c=0)}else 1===c&&(t=a.return)&&t.call(a),c<2&&(s=TypeError("The iterator does not provide a '"+o+"' method"),c=1);a=e}else if((t=(d=f.n<0)?s:n.call(r,f))!==i)break}catch(t){a=e,c=1,s=t}finally{l=1}}return{value:t,done:d}}}(n,o,a),!0),l}var i={};function c(){}function s(){}function l(){}t=Object.getPrototypeOf;var u=[][r]?t(t([][r]())):(_(t={},r,(function(){return this})),t),d=l.prototype=c.prototype=Object.create(u);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,_(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e}return s.prototype=l,_(d,"constructor",l),_(l,"constructor",s),s.displayName="GeneratorFunction",_(l,o,"GeneratorFunction"),_(d),_(d,o,"Generator"),_(d,r,(function(){return this})),_(d,"toString",(function(){return"[object Generator]"})),(M=function(){return{w:a,m:f}})()}function _(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}_=function(e,t,n,r){if(t)o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n;else{var a=function(t,n){_(e,t,(function(e){return this._invoke(t,n,e)}))};a("next",0),a("throw",1),a("return",2)}},_(e,t,n,r)}function R(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function H(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){R(a,r,o,i,c,"next",e)}function c(e){R(a,r,o,i,c,"throw",e)}i(void 0)}))}}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return(t=function(e){var t=function(e){if("object"!=N(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){var t=e.name,n=e.value,r=e.rating;console.log("Web Vitals - ".concat(t,": ").concat(n," (").concat(r,")"))}console.log("Sentry DSN not found, Sentry not initialized for frontend."),((e,o={})=>{E(d((()=>{let a,c=i("CLS",0);const d=s(o,l),f=e=>{for(const t of e)d.h(t);d.i>c.value&&(c.value=d.i,c.entries=d.o,a())},p=u("layout-shift",f);p&&(a=n(e,c,T,o.reportAllChanges),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(f(p.takeRecords()),a(!0))})),t((()=>{d.i=0,c=i("CLS",0),a=n(e,c,T,o.reportAllChanges),r((()=>a()))})),setTimeout(a))})))})(q),((e,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&y((()=>{"interactionCount"in performance||C||(C=u("event",I,{type:"event",buffered:!0,durationThreshold:0}));let o,a=i("INP");const c=s(r,O),l=e=>{j((()=>{for(const t of e)c.h(t);const t=c.P();t&&t.T!==a.value&&(a.value=t.T,a.entries=t.entries,o())}))},d=u("event",l,{durationThreshold:r.durationThreshold??40});o=n(e,a,B,r.reportAllChanges),d&&(d.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",(()=>{"hidden"===document.visibilityState&&(l(d.takeRecords()),o(!0))})),t((()=>{c.v(),a=i("INP"),o=n(e,a,B,r.reportAllChanges)})))}))})(q),((e,o={})=>{y((()=>{const c=g();let l,f=i("LCP");const p=s(o,A),m=e=>{o.reportAllChanges||(e=e.slice(-1));for(const t of e)p.h(t),t.startTime<c.firstHiddenTime&&(f.value=Math.max(t.startTime-a(),0),f.entries=[t],l())},h=u("largest-contentful-paint",m);if(h){l=n(e,f,x,o.reportAllChanges);const a=d((()=>{m(h.takeRecords()),h.disconnect(),l(!0)}));for(const e of["keydown","click","visibilitychange"])addEventListener(e,(()=>j(a)),{capture:!0,once:!0});t((t=>{f=i("LCP"),l=n(e,f,x,o.reportAllChanges),r((()=>{f.value=performance.now()-t.timeStamp,l(!0)}))}))}}))})(q),E(q),((e,r={})=>{let c=i("TTFB"),s=n(e,c,F,r.reportAllChanges);D((()=>{const l=o();l&&(c.value=Math.max(l.responseStart-a(),0),c.entries=[l],s(!0),t((()=>{c=i("TTFB",0),s=n(e,c,F,r.reportAllChanges),s(!0)})))}))})(q),document.addEventListener("DOMContentLoaded",(function(){console.log("Todo App Frontend Initialized");var e,t="http://localhost:8000/api",n=localStorage.getItem("accessToken"),r=localStorage.getItem("refreshToken"),o=document.getElementById("auth-forms"),a=document.getElementById("app"),i=document.getElementById("login-form"),c=document.getElementById("register-form"),s=document.getElementById("logout-button"),l=document.getElementById("logged-in-username"),u=document.getElementById("add-todo-form"),d=document.getElementById("todo-list"),f=document.getElementById("search-input"),p=document.getElementById("filter-status"),m=document.getElementById("filter-priority"),h=document.getElementById("pagination"),v=[],g=1,y={search:"",status:"all",priority:"all"};function b(){localStorage.setItem("todoFilters",JSON.stringify(y))}function E(e){if(e)l.textContent=e;else if(n)try{var t=JSON.parse(atob(n.split(".")[1]));l.textContent=t.username||"User"}catch(e){console.error("Error decoding token for username:",e),l.textContent="User"}else l.textContent="User"}function T(){o.classList.remove("hidden"),a.classList.add("hidden")}function k(){o.classList.add("hidden"),a.classList.remove("hidden")}function w(e){return S.apply(this,arguments)}function S(){return S=H(M().m((function e(o){var a,i,c,s,l,u,d,f,p=arguments;return M().w((function(e){for(;;)switch(e.n){case 0:return a=p.length>1&&void 0!==p[1]?p[1]:"GET",i=p.length>2&&void 0!==p[2]?p[2]:null,s={"Content-Type":"application/json"},(c=!(p.length>3&&void 0!==p[3])||p[3])&&n&&(s.Authorization="Bearer ".concat(n)),l={method:a,headers:s},i&&(l.body=JSON.stringify(i)),e.p=1,e.n=2,fetch("".concat(t).concat(o),l);case 2:if(401!==(u=e.v).status||!c){e.n=5;break}return e.n=3,I(o,a,i);case 3:if(!(d=e.v)){e.n=4;break}return e.a(2,d);case 4:throw localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),n=null,r=null,v=[],T(),new Error("Authentication failed, please log in again.");case 5:return e.a(2,u);case 6:throw e.p=6,f=e.v,console.error("API Request Error:",f),f;case 7:return e.a(2)}}),e,null,[[1,6]])}))),S.apply(this,arguments)}function I(e,t,n){return C.apply(this,arguments)}function C(){return(C=H(M().m((function e(o,a,i){var c,s,l;return M().w((function(e){for(;;)switch(e.n){case 0:if(r){e.n=1;break}return e.a(2,null);case 1:return e.p=1,e.n=2,fetch("".concat(t,"/token/refresh/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({refresh:r})});case 2:if((c=e.v).ok){e.n=3;break}return console.error("Failed to refresh token"),e.a(2,null);case 3:return e.n=4,c.json();case 4:return s=e.v,n=s.access,localStorage.setItem("accessToken",n),console.log("Token refreshed successfully"),e.n=5,w(o,a,i,!0);case 5:return e.a(2,e.v);case 6:return e.p=6,l=e.v,console.error("Error refreshing token:",l),e.a(2,null)}}),e,null,[[1,6]])})))).apply(this,arguments)}function L(){return P.apply(this,arguments)}function P(){return P=H(M().m((function e(){var r,o,a,i,c,s,l=arguments;return M().w((function(e){for(;;)switch(e.n){case 0:if(r=l.length>0&&void 0!==l[0]?l[0]:1,n){e.n=1;break}return e.a(2);case 1:return o="?page=".concat(g=r),y.search&&(o+="&search=".concat(encodeURIComponent(y.search))),"all"!==y.status&&(o+="&status=".concat(y.status)),"all"!==y.priority&&(o+="&priority=".concat(y.priority)),console.log("Fetching todos with params: ".concat(t,"/todos/").concat(o)),e.p=2,e.n=3,w("/todos/".concat(o));case 3:if((a=e.v).ok){e.n=5;break}return e.n=4,a.json().catch((function(){return{detail:"Failed to fetch todos"}}));case 4:throw i=e.v,new Error(i.detail||"Failed to fetch todos");case 5:return e.n=6,a.json();case 6:c=e.v,v=c.results,O(),j(c),e.n=8;break;case 7:e.p=7,s=e.v,console.error("Error fetching todos:",s),alert(s.message);case 8:return e.a(2)}}),e,null,[[2,7]])}))),P.apply(this,arguments)}function O(){if(d.innerHTML="",0===v.length&&n){var e=document.createElement("li");return e.textContent="No todos yet. Add one!",void d.appendChild(e)}v.forEach((function(e){var t=document.createElement("li");t.dataset.id=e.id,t.className="todo-item",e.completed&&t.classList.add("completed");var n=document.createElement("span");n.className="todo-title",n.textContent=e.title;var r=document.createElement("span");r.className="todo-details";var o=[];e.priority&&o.push("Priority: ".concat({L:"Low",M:"Medium",H:"High",U:"Urgent"}[e.priority]||e.priority)),e.due_date&&o.push("Due: ".concat(new Date(e.due_date).toLocaleDateString()," ").concat(new Date(e.due_date).toLocaleTimeString())),r.textContent=o.join(" | "),o.length>0&&n.appendChild(r);var a=document.createElement("input");a.type="checkbox",a.checked=e.completed,a.addEventListener("change",(function(){return function(e,t){return B.apply(this,arguments)}(e.id,e.completed)}));var i=document.createElement("div");i.className="todo-actions";var c=document.createElement("button");c.textContent="Edit",c.className="edit-button",c.addEventListener("click",(function(){return function(e){console.log("Edit todo:",e);var t=prompt("Enter new title:",e.title);t&&t.trim()!==e.title&&function(e,t){x.apply(this,arguments)}(e.id,{title:t.trim()})}(e)}));var s=document.createElement("button");s.textContent="Delete",s.className="delete-button",s.addEventListener("click",(function(){return function(e){return A.apply(this,arguments)}(e.id)}));var l=document.createElement("div");l.style.display="flex",l.style.alignItems="center",l.appendChild(a),l.appendChild(n),i.appendChild(c),i.appendChild(s),t.appendChild(l),t.appendChild(i),d.appendChild(t)}))}function j(e){h.innerHTML="";var t=Math.ceil(e.count/10);if(t>1){if(e.previous){var n=document.createElement("button");n.textContent="Previous",n.addEventListener("click",(function(){return L(g-1)})),h.appendChild(n)}for(var r=function(e){var t=document.createElement("button");t.textContent=e,e===g&&(t.disabled=!0),t.addEventListener("click",(function(){return L(e)})),h.appendChild(t)},o=1;o<=t;o++)r(o);if(e.next){var a=document.createElement("button");a.textContent="Next",a.addEventListener("click",(function(){return L(g+1)})),h.appendChild(a)}}}function B(){return(B=H(M().m((function e(t,n){var r;return M().w((function(e){for(;;)switch(e.n){case 0:return console.log("Toggle complete for todo ".concat(t,", current status: ").concat(n)),e.p=1,e.n=2,w("/todos/".concat(t,"/"),"PATCH",{completed:!n});case 2:e.v.ok?L(g):alert("Failed to update todo status."),e.n=4;break;case 3:e.p=3,r=e.v,console.error("Error toggling todo status:",r),alert("Error toggling todo status.");case 4:return e.a(2)}}),e,null,[[1,3]])})))).apply(this,arguments)}function A(){return(A=H(M().m((function e(t){var n;return M().w((function(e){for(;;)switch(e.n){case 0:if(console.log("Delete todo ".concat(t)),confirm("Are you sure you want to delete this todo?")){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,w("/todos/".concat(t,"/"),"DELETE");case 2:e.v.ok?L():alert("Failed to delete todo."),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Error deleting todo:",n),alert("Error deleting todo.");case 4:return e.a(2)}}),e,null,[[1,3]])})))).apply(this,arguments)}function x(){return(x=H(M().m((function e(t,n){var r,o,a;return M().w((function(e){for(;;)switch(e.n){case 0:return e.p=0,e.n=1,w("/todos/".concat(t,"/"),"PATCH",n);case 1:if(!(r=e.v).ok){e.n=2;break}L(g),e.n=4;break;case 2:return e.n=3,r.json().catch((function(){return{detail:"Failed to update todo."}}));case 3:o=e.v,alert("Error updating todo: ".concat(o.detail||JSON.stringify(o)));case 4:e.n=6;break;case 5:e.p=5,a=e.v,console.error("Update todo error:",a),alert("An error occurred while updating the todo.");case 6:return e.a(2)}}),e,null,[[0,5]])})))).apply(this,arguments)}n?(k(),E(),function(){var e=localStorage.getItem("todoFilters");if(e)try{var t=JSON.parse(e);y=G(G({},y),t),f&&y.search&&(f.value=y.search),p&&y.status&&(p.value=y.status),m&&y.priority&&(m.value=y.priority)}catch(e){console.error("Error parsing saved filters from localStorage:",e),localStorage.removeItem("todoFilters")}}(),L(),d&&"undefined"!=typeof Sortable?new Sortable(d,{animation:150,ghostClass:"sortable-ghost",onEnd:(e=H(M().m((function e(t){var n,r,o,a,i,c;return M().w((function(e){for(;;)switch(e.n){case 0:return n=Array.from(d.children).map((function(e){return e.dataset.id})),console.log("Reordered IDs:",n),e.p=1,e.n=2,w("/todos/reorder/","POST",{order:n});case 2:if((r=e.v).ok){e.n=4;break}return e.n=3,r.json().catch((function(){return{detail:"Failed to reorder todos."}}));case 3:o=e.v,alert("Error reordering todos: ".concat(o.detail||r.statusText)),L(g),e.n=5;break;case 4:console.log("Todos reordered successfully on backend."),a=[],i=new Map(v.map((function(e){return[String(e.id),e]}))),n.forEach((function(e){i.has(e)&&a.push(i.get(e))})),v=a;case 5:e.n=7;break;case 6:e.p=6,c=e.v,console.error("Reorder API call error:",c),alert("An error occurred while reordering todos. Please try again."),L(g);case 7:return e.a(2)}}),e,null,[[1,6]])}))),function(t){return e.apply(this,arguments)})}):"undefined"==typeof Sortable&&console.warn("SortableJS is not loaded. Drag-and-drop will not be available.")):T(),i&&i.addEventListener("submit",function(){var e=H(M().m((function e(t){var o,a,c,s,l,u;return M().w((function(e){for(;;)switch(e.n){case 0:return t.preventDefault(),o=document.getElementById("login-username").value,a=document.getElementById("login-password").value,e.p=1,e.n=2,w("/token/","POST",{username:o,password:a},!1);case 2:if(!(c=e.v).ok){e.n=4;break}return e.n=3,c.json();case 3:s=e.v,n=s.access,r=s.refresh,localStorage.setItem("accessToken",n),localStorage.setItem("refreshToken",r),E(o),k(),L(),i.reset(),e.n=6;break;case 4:return e.n=5,c.json().catch((function(){return{detail:"Login failed. Please check your credentials."}}));case 5:l=e.v,alert("Login Failed: ".concat(l.detail||c.statusText));case 6:e.n=8;break;case 7:e.p=7,u=e.v,console.error("Login error:",u),alert("An error occurred during login. Please try again.");case 8:return e.a(2)}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()),c&&c.addEventListener("submit",function(){var e=H(M().m((function e(t){var n,r,o,a,i,s,l,u,d,f,p,m,h;return M().w((function(e){for(;;)switch(e.n){case 0:return t.preventDefault(),n=document.getElementById("register-username").value,r=document.getElementById("register-password").value,o=document.getElementById("register-email").value,a=document.getElementById("register-first-name").value,i=document.getElementById("register-last-name").value,s=document.getElementById("register-bio").value,l=document.getElementById("register-location").value,u={username:n,password:r,email:o||void 0,first_name:a||void 0,last_name:i||void 0,bio:s||void 0,location:l||void 0},Object.keys(u).forEach((function(e){return void 0===u[e]&&delete u[e]})),e.p=1,e.n=2,w("/users/register/","POST",u,!1);case 2:if(!(d=e.v).ok){e.n=3;break}alert("Registration successful! Please log in."),c.reset(),e.n=5;break;case 3:return e.n=4,d.json();case 4:for(m in f=e.v,p="Registration failed:\\n",f)p+="".concat(m,": ").concat(f[m].join(", "),"\\n");alert(p);case 5:e.n=7;break;case 6:e.p=6,h=e.v,console.error("Registration error:",h),alert("An error occurred during registration. Please try again.");case 7:return e.a(2)}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),s&&s.addEventListener("click",(function(){console.log("Logout button clicked"),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),n=null,r=null,v=[],T()})),u&&u.addEventListener("submit",function(){var e=H(M().m((function e(t){var n,r,o,a,i,c,s;return M().w((function(e){for(;;)switch(e.n){case 0:if(t.preventDefault(),n=document.getElementById("todo-title").value,r=document.getElementById("todo-due-date"),o=document.getElementById("todo-priority").value,n.trim()){e.n=1;break}return alert("Title is required."),e.a(2);case 1:return a={title:n.trim(),priority:o},r.value&&(a.due_date=new Date(r.value).toISOString()),e.p=2,e.n=3,w("/todos/","POST",a);case 3:if(!(i=e.v).ok){e.n=4;break}L(g),u.reset(),e.n=6;break;case 4:return e.n=5,i.json().catch((function(){return{detail:"Failed to create todo."}}));case 5:c=e.v,alert("Error creating todo: ".concat(c.detail||JSON.stringify(c)));case 6:e.n=8;break;case 7:e.p=7,s=e.v,console.error("Create todo error:",s),alert("An error occurred while creating the todo.");case 8:return e.a(2)}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()),f&&f.addEventListener("input",(function(){y.search=f.value,b(),L()})),p&&p.addEventListener("change",(function(){y.status=p.value,b(),L()})),m&&m.addEventListener("change",(function(){y.priority=m.value,b(),L()})),n&&L()}))})();